{% extends 'base.html' %}
{% block content %}

{% if success %}
<div class="message">
    <img class="icon" src="/img/success.png" />
    <h1>Your campaign was successfully created. To begin gathering data, provide the following link to your users:</h1>
    <p>Campaign Link</p>
    <input onClick="this.setSelectionRange(0, this.value.length)" type="text" readonly value="{{ campaignUrl }}" />
</div>
{% else %}
<form class="validate" action="/admin/{{ targetHandle }}/create" method="POST" id='mainForm'>
    <input type="hidden" name="formData" id="formData" />
    {% if errors %}
    <ul class="errors">
        {% for error in errors %}
        <li>{{ error }}</li>
        {% endfor %}
    </ul>
    {% endif %}

    <div class="formSize campaignHeader">
        <img class="logo" src="/profilePicture/{{targetHandle}}" />
        <div class="field">
            <h2>@{{ targetHandle }}</h2>
        </div>
        <div class="field">
            <input id="campaignName" type="text" value="{{ name }}" tabindex="2" placeholder="Campaign Name">
        </div>
        <div class="field">
            <input id="campaignDescription" type="text" value="{{ description }}" tabindex="3" placeholder="Campaign description">
        </div>
    </div>

    <div class="customFields">
        <div class="field toClone">
            <input type="text" value="" novalidate placeholder="">
            <a href="#" class="close">&#215</a>
        </div>
    </div>

    <div class="newField">
        <div class="field">
            <input type="text" value="{{ momentsLink }}" tabindex="4" novalidate placeholder="Field name">
            <select>
                <option disabled selected>Type</option>
                <option value="text">Text</option>
                <option value="email">Email</option>
                <option value="date">Date</option>
                <option value="cpf">CPF</option>
            </select>
        </div>
    </div>

    <div class="addField field">
        <a href="#">Add Field</a>
    </div>

    <div class="field">
        <input id="momentsLink" novalidate type="text" value="{{ momentsLink }}" tabindex="4" placeholder="Moments URL">
    </div>
    <div class="field">
        <textarea id="successMessage" tabindex="5" placeholder="Success Message">{{ confirmationMessage }}</textarea>
    </div>
    <div class="field">
        <input id="pixelLink" novalidate type="text" value="{{ conversionUrl }}" tabindex="6" placeholder="Conversion Link">
    </div>
    <div class="field buttons">
        <button id="previewButton" type="submit">Preview Form</button>
        <button id="createForm">Save</button>
    </div>
</form>
<form id="preview" action="/admin/preview" method="POST" target="_blank">
    <input name="previewForm" type="hidden" value="" />
</form>
<script type="text/javascript" src="/js/jquery.mask.min.js"></script>
<script type="text/javascript" src="/js/create.js"></script>
{% endif %}
{% endblock %}
